# 事务与并发控制
数据库的并发控制系统引入了 基于锁的并发控制机制(Lock-Based Concurrency Control) 和 基于多版本的并发控制机制 MVCC(Multi-Version Concurrency Control)

## 事务与并发概念
事务时数据库系统执行过程中最小的逻辑单位. 当事务被提交时, 数据库管理系统药确保一个事务中的所有操作都成功完成, 并且在数据库中永久保存操作结果. 如果一个事务中的一部分操作没有成功完成, 则数据库管理系统会把数据库回滚到操作执行之前的状态.

- 原子性: 一个事务的所有操作, 要么全部执行, 要么全部不执行, 由事务管理器和 MVCC 控制
- 一致性: 执行事务时保存数据库从一个一致的状态变更到另一个一致的状态, 由主键,外键这类约束保证
- 隔离性: 即使每个事务都能确保一致性和原子性, 如果并发执行时, 由于它们的操作以人们不希望的方式交叉运行, 就会导致不一致的情况发生. 确保事务与事务并发执行时, 每个事务都感觉不到有其他事务在并发的执行,  由事务管理器和 MVCC 控制
- 持久性: 一个事务完成后, 即使数据库发生故障, 他对数据库的改变应该永久保存在数据库中, 由预写日志和数据库管理系统的恢复子系统保证

### 并发引起现象
- 脏读: Dirty read 当第一个事务读取了第二个事务中已经修改但还未提交的数据, 包括 insert, update, delete, 当第二个事务不提交并执行 rollback 后, 第一个事务所读到的数据时不正确的, 即为 脏读.
    ```
    
    ```

- 不可重复读: Non-repeatable read
- 幻读: Phantom read
- 序列化异常: Serialization anomaly